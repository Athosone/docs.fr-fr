---
title: Serialization2
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
ms.assetid: a15ae411-8dc2-4ca3-84d2-01c9d5f1972a
ms.openlocfilehash: b6778522b5757c0ece899f7465d3ab500038fc49
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/18/2019
ms.locfileid: "59202558"
---
# <a name="serialization"></a><span data-ttu-id="683e5-102">Sérialisation</span><span class="sxs-lookup"><span data-stu-id="683e5-102">Serialization</span></span>
<span data-ttu-id="683e5-103">Cette rubrique décrit [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] fonctions de sérialisation.</span><span class="sxs-lookup"><span data-stu-id="683e5-103">This topic describes [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] serialization capabilities.</span></span> <span data-ttu-id="683e5-104">Les paragraphes qui suivent fournissent des informations sur l'ajout de la sérialisation pendant la génération de code au moment du design et le comportement de sérialisation à l'exécution de classes [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)].</span><span class="sxs-lookup"><span data-stu-id="683e5-104">The paragraphs that follow provide information about how to add serialization during code generation at design time and the run-time serialization behavior of [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] classes.</span></span>  
  
 <span data-ttu-id="683e5-105">Vous pouvez ajouter du code de sérialisation au moment du design selon l'un des méthodes suivantes :</span><span class="sxs-lookup"><span data-stu-id="683e5-105">You can add serialization code at design time by either of the following methods:</span></span>  
  
-   <span data-ttu-id="683e5-106">Dans le [!INCLUDE[vs_ordesigner_long](../../../../../../includes/vs-ordesigner-long-md.md)], modifiez le **Mode de sérialisation** propriété **Serialization**.</span><span class="sxs-lookup"><span data-stu-id="683e5-106">In the [!INCLUDE[vs_ordesigner_long](../../../../../../includes/vs-ordesigner-long-md.md)], change the **Serialization Mode** property to **Unidirectional**.</span></span>  
  
-   <span data-ttu-id="683e5-107">Sur la ligne de commande SQLMetal, ajoutez le **/serialization** option.</span><span class="sxs-lookup"><span data-stu-id="683e5-107">On the SQLMetal command line, add the **/serialization** option.</span></span> <span data-ttu-id="683e5-108">Pour plus d’informations, consultez [SqlMetal.exe (outil de génération de code)](../../../../../../docs/framework/tools/sqlmetal-exe-code-generation-tool.md).</span><span class="sxs-lookup"><span data-stu-id="683e5-108">For more information, see [SqlMetal.exe (Code Generation Tool)](../../../../../../docs/framework/tools/sqlmetal-exe-code-generation-tool.md).</span></span>  
  
## <a name="overview"></a><span data-ttu-id="683e5-109">Vue d'ensemble</span><span class="sxs-lookup"><span data-stu-id="683e5-109">Overview</span></span>  
 <span data-ttu-id="683e5-110">Le code généré par [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] fournit des fonctions de chargement différé par défaut.</span><span class="sxs-lookup"><span data-stu-id="683e5-110">The code generated by [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] provides deferred loading capabilities by default.</span></span> <span data-ttu-id="683e5-111">Le chargement différé est très utile au niveau intermédiaire pour le chargement transparent de données à la demande.</span><span class="sxs-lookup"><span data-stu-id="683e5-111">Deferred loading is very convenient on the mid-tier for transparent loading of data on demand.</span></span> <span data-ttu-id="683e5-112">Il pose toutefois problème pour la sérialisation car le sérialiseur déclenche un chargement différé, qu'il soit voulu ou non.</span><span class="sxs-lookup"><span data-stu-id="683e5-112">However, it is problematic for serialization, because the serializer triggers deferred loading whether deferred loading is intended or not.</span></span> <span data-ttu-id="683e5-113">En effet, lorsqu'un objet est sérialisé, sa fermeture transitive dans toutes les références à chargement différé en sortie est sérialisée.</span><span class="sxs-lookup"><span data-stu-id="683e5-113">In effect, when an object is serialized, its transitive closure under all outbound defer-loaded references is serialized.</span></span>  
  
 <span data-ttu-id="683e5-114">Le [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] fonctionnalité de sérialisation résout ce problème, principalement par le biais de deux mécanismes :</span><span class="sxs-lookup"><span data-stu-id="683e5-114">The [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] serialization feature addresses this problem, primarily through two mechanisms:</span></span>  
  
-   <span data-ttu-id="683e5-115">Un mode <xref:System.Data.Linq.DataContext> pour désactiver le chargement différé (<xref:System.Data.Linq.DataContext.ObjectTrackingEnabled%2A>).</span><span class="sxs-lookup"><span data-stu-id="683e5-115">A <xref:System.Data.Linq.DataContext> mode for turning off deferred loading (<xref:System.Data.Linq.DataContext.ObjectTrackingEnabled%2A>).</span></span> <span data-ttu-id="683e5-116">Pour plus d'informations, consultez <xref:System.Data.Linq.DataContext>.</span><span class="sxs-lookup"><span data-stu-id="683e5-116">For more information, see <xref:System.Data.Linq.DataContext>.</span></span>  
  
-   <span data-ttu-id="683e5-117">Un commutateur de génération de code pour générer des attributs <xref:System.Runtime.Serialization.DataContractAttribute?displayProperty=nameWithType> et <xref:System.Runtime.Serialization.DataMemberAttribute?displayProperty=nameWithType> sur les entités générées.</span><span class="sxs-lookup"><span data-stu-id="683e5-117">A code-generation switch to generate <xref:System.Runtime.Serialization.DataContractAttribute?displayProperty=nameWithType> and <xref:System.Runtime.Serialization.DataMemberAttribute?displayProperty=nameWithType> attributes on generated entities.</span></span> <span data-ttu-id="683e5-118">Cet aspect, y compris le comportement de chargement différé des classes lors de la sérialisation, est le principal objet de cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="683e5-118">This aspect, including the behavior of defer-loading classes under serialization, is the major subject of this topic.</span></span>  
  
### <a name="definitions"></a><span data-ttu-id="683e5-119">Définitions</span><span class="sxs-lookup"><span data-stu-id="683e5-119">Definitions</span></span>  
  
-   <span data-ttu-id="683e5-120">*Sérialiseur DataContract*: Sérialiseur par défaut utilisé par le composant de Windows Communication Framework (WCF) du .NET Framework 3.0 ou versions ultérieures.</span><span class="sxs-lookup"><span data-stu-id="683e5-120">*DataContract serializer*: Default serializer used by the Windows Communication Framework (WCF) component of the .NET Framework 3.0 or later versions.</span></span>  
  
-   <span data-ttu-id="683e5-121">*Sérialisation unidirectionnelle*: La version sérialisée d’une classe qui contient uniquement une propriété d’association unidirectionnelle (pour éviter un cycle).</span><span class="sxs-lookup"><span data-stu-id="683e5-121">*Unidirectional serialization*: The serialized version of a class that contains only a one-way association property (to avoid a cycle).</span></span> <span data-ttu-id="683e5-122">Par convention, la propriété sur le côté parent d'une relation de clé primaire-étrangère est marquée pour sérialisation.</span><span class="sxs-lookup"><span data-stu-id="683e5-122">By convention, the property on the parent side of a primary-foreign key relationship is marked for serialization.</span></span> <span data-ttu-id="683e5-123">L'autre côté d'une association bidirectionnelle n'est pas sérialisé.</span><span class="sxs-lookup"><span data-stu-id="683e5-123">The other side in a bidirectional association is not serialized.</span></span>  
  
     <span data-ttu-id="683e5-124">La sérialisation unidirectionnelle est le seul type de sérialisation pris en charge par [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)].</span><span class="sxs-lookup"><span data-stu-id="683e5-124">Unidirectional serialization is the only type of serialization supported by [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)].</span></span>  
  
## <a name="code-example"></a><span data-ttu-id="683e5-125">Exemple de code</span><span class="sxs-lookup"><span data-stu-id="683e5-125">Code Example</span></span>  
 <span data-ttu-id="683e5-126">Le code suivant utilise les classes `Customer` et `Order` standard de l'exemple de base de données Northwind et montre comment ces classes sont décorées avec les attributs de sérialisation.</span><span class="sxs-lookup"><span data-stu-id="683e5-126">The following code uses the traditional `Customer` and `Order` classes from the Northwind sample database, and shows how these classes are decorated with serialization attributes.</span></span>  
  
 [!code-csharp[DLinqSerialization#1](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DLinqSerialization/cs/northwind-ser.cs#1)]
 [!code-vb[DLinqSerialization#1](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DLinqSerialization/vb/northwind-ser.vb#1)]  
  
 [!code-csharp[DLinqSerialization#2](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DLinqSerialization/cs/northwind-ser.cs#2)]
 [!code-vb[DLinqSerialization#2](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DLinqSerialization/vb/northwind-ser.vb#2)]  
  
 [!code-csharp[DLinqSerialization#3](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DLinqSerialization/cs/northwind-ser.cs#3)]
 [!code-vb[DLinqSerialization#3](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DLinqSerialization/vb/northwind-ser.vb#3)]  
  
 <span data-ttu-id="683e5-127">Pour la classe `Order` de l'exemple suivant, seule la propriété d'association inverse correspondant à la classe `Customer` est montrée, par souci de concision.</span><span class="sxs-lookup"><span data-stu-id="683e5-127">For the `Order` class in the following example, only the reverse association property corresponding to the `Customer` class is shown for brevity.</span></span> <span data-ttu-id="683e5-128">Elle n'a pas d'attribut <xref:System.Runtime.Serialization.DataMemberAttribute> pour éviter un cycle.</span><span class="sxs-lookup"><span data-stu-id="683e5-128">It does not have a <xref:System.Runtime.Serialization.DataMemberAttribute> attribute to avoid a cycle.</span></span>  
  
 [!code-csharp[DLinqSerialization#4](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DLinqSerialization/cs/northwind-ser.cs#4)]
 [!code-vb[DLinqSerialization#4](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DLinqSerialization/vb/northwind-ser.vb#4)]  
  
 [!code-csharp[DLinqSerialization#5](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DLinqSerialization/cs/northwind-ser.cs#5)]
 [!code-vb[DLinqSerialization#5](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DLinqSerialization/vb/northwind-ser.vb#5)]  
  
### <a name="how-to-serialize-the-entities"></a><span data-ttu-id="683e5-129">Comment sérialiser les entités</span><span class="sxs-lookup"><span data-stu-id="683e5-129">How to Serialize the Entities</span></span>  
 <span data-ttu-id="683e5-130">Vous pouvez sérialiser les entités dans les codes présentés dans la section précédente (voir ci-dessous).</span><span class="sxs-lookup"><span data-stu-id="683e5-130">You can serialize the entities in the codes shown in the previous section as follows;</span></span>  
  
 [!code-csharp[DLinqSerialization#6](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DLinqSerialization/cs/Program.cs#6)]
 [!code-vb[DLinqSerialization#6](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DLinqSerialization/vb/Module1.vb#6)]  
  
### <a name="self-recursive-relationships"></a><span data-ttu-id="683e5-131">Relations auto-récursives</span><span class="sxs-lookup"><span data-stu-id="683e5-131">Self-Recursive Relationships</span></span>  
 <span data-ttu-id="683e5-132">Les relations auto-récursives suivent le même modèle.</span><span class="sxs-lookup"><span data-stu-id="683e5-132">Self-recursive relationships follow the same pattern.</span></span> <span data-ttu-id="683e5-133">La propriété d'association qui correspond à la clé étrangère n'a pas d'attribut <xref:System.Runtime.Serialization.DataMemberAttribute>, contrairement à la propriété parente.</span><span class="sxs-lookup"><span data-stu-id="683e5-133">The association property corresponding to the foreign key does not have a <xref:System.Runtime.Serialization.DataMemberAttribute> attribute, whereas the parent property does.</span></span>  
  
 <span data-ttu-id="683e5-134">Considérez la classe suivante, qui a deux relations auto-récursives : Employee.Manager/Reports et Employee.mentor/mentees.</span><span class="sxs-lookup"><span data-stu-id="683e5-134">Consider the following class that has two self-recursive relationships: Employee.Manager/Reports and Employee.Mentor/Mentees.</span></span>  
  
 [!code-csharp[DLinqSerialization#7](../../../../../../samples/snippets/csharp/VS_Snippets_Data/DLinqSerialization/cs/northwind-ser.cs#7)]
 [!code-vb[DLinqSerialization#7](../../../../../../samples/snippets/visualbasic/VS_Snippets_Data/DLinqSerialization/vb/northwind-ser.vb#7)]  
  
## <a name="see-also"></a><span data-ttu-id="683e5-135">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="683e5-135">See also</span></span>

- [<span data-ttu-id="683e5-136">Informations générales</span><span class="sxs-lookup"><span data-stu-id="683e5-136">Background Information</span></span>](../../../../../../docs/framework/data/adonet/sql/linq/background-information.md)
- [<span data-ttu-id="683e5-137">SqlMetal.exe (outil de génération de code)</span><span class="sxs-lookup"><span data-stu-id="683e5-137">SqlMetal.exe (Code Generation Tool)</span></span>](../../../../../../docs/framework/tools/sqlmetal-exe-code-generation-tool.md)
- [<span data-ttu-id="683e5-138">Guide pratique pour Rendre les entités sérialisables</span><span class="sxs-lookup"><span data-stu-id="683e5-138">How to: Make Entities Serializable</span></span>](../../../../../../docs/framework/data/adonet/sql/linq/how-to-make-entities-serializable.md)
