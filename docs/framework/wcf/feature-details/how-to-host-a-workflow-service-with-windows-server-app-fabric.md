---
title: 'Procédure : héberger un service de workflow avec Windows Server App Fabric'
ms.date: 03/30/2017
ms.assetid: 83b62cce-5fc2-4c6d-b27c-5742ba3bac73
ms.openlocfilehash: d1042aca7e4127c39e59bf0bf400974f0cecb1e8
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/18/2019
ms.locfileid: "59314735"
---
# <a name="how-to-host-a-workflow-service-with-windows-server-app-fabric"></a><span data-ttu-id="965ce-102">Procédure : héberger un service de workflow avec Windows Server App Fabric</span><span class="sxs-lookup"><span data-stu-id="965ce-102">How to: Host a Workflow Service with Windows Server App Fabric</span></span>
<span data-ttu-id="965ce-103">L'hébergement de services de workflow dans App Fabric est similaire à l'hébergement sous IIS/WAS.</span><span class="sxs-lookup"><span data-stu-id="965ce-103">Hosting workflow services in App Fabric is similar to hosting under IIS/WAS.</span></span> <span data-ttu-id="965ce-104">La seule différence réside dans les outils que propose App Fabric pour déployer, surveiller et gérer les services de workflow.</span><span class="sxs-lookup"><span data-stu-id="965ce-104">The only difference is the tools App Fabric provides for deploying, monitoring, and managing workflow services.</span></span> <span data-ttu-id="965ce-105">Cette rubrique utilise le service de flux de travail créé dans le [création d’un Service de flux de travail de longue](../../../../docs/framework/wcf/feature-details/creating-a-long-running-workflow-service.md).</span><span class="sxs-lookup"><span data-stu-id="965ce-105">This topic uses the workflow service created in the [Creating a Long-running Workflow Service](../../../../docs/framework/wcf/feature-details/creating-a-long-running-workflow-service.md).</span></span> <span data-ttu-id="965ce-106">Celle-ci vous guide dans la création d'un service de workflow.</span><span class="sxs-lookup"><span data-stu-id="965ce-106">That topic will walk you through creating a workflow service.</span></span> <span data-ttu-id="965ce-107">La présente rubrique explique comment héberger le service de workflow à l'aide d'App Fabric.</span><span class="sxs-lookup"><span data-stu-id="965ce-107">This topic will explain how to host the workflow service using App Fabric.</span></span> <span data-ttu-id="965ce-108">Pour plus d’informations sur Windows Server AppFabric, consultez [Documentation de Windows Server App Fabric](https://go.microsoft.com/fwlink/?LinkID=193037&clcid=0x409).</span><span class="sxs-lookup"><span data-stu-id="965ce-108">For more information about Windows Server App Fabric, see [Windows Server App Fabric Documentation](https://go.microsoft.com/fwlink/?LinkID=193037&clcid=0x409).</span></span> <span data-ttu-id="965ce-109">Avant de réaliser les étapes suivantes, vérifiez que Windows Server App Fabric est installé.</span><span class="sxs-lookup"><span data-stu-id="965ce-109">Before completing the steps below make sure you have Windows Server App Fabric installed.</span></span>  <span data-ttu-id="965ce-110">Pour cela, ouvrez Internet Information Services (inetmgr.exe), cliquez sur le nom de votre serveur dans le **connexions** afficher, cliquez sur Sites, puis cliquez sur **Site Web par défaut**.</span><span class="sxs-lookup"><span data-stu-id="965ce-110">To do this open up Internet Information Services (inetmgr.exe), click your server name in the **Connections** view, click Sites, and click **Default Web Site**.</span></span> <span data-ttu-id="965ce-111">Dans la partie droite de l’écran, vous devez voir une section appelée **AppFabric**.</span><span class="sxs-lookup"><span data-stu-id="965ce-111">In the right-hand side of the screen you should see a section called **App Fabric**.</span></span> <span data-ttu-id="965ce-112">Si cette section ne s'affiche pas (en haut du volet droit), AppFabric n'est pas installé.</span><span class="sxs-lookup"><span data-stu-id="965ce-112">If you don’t see this section (it will be on the top of the right-hand pane) you do not have App Fabric installed.</span></span> <span data-ttu-id="965ce-113">Pour plus d’informations sur l’installation de Windows Server AppFabric, consultez [l’installation de Windows Server AppFabric](https://go.microsoft.com/fwlink/?LinkId=193136).</span><span class="sxs-lookup"><span data-stu-id="965ce-113">For more information about installing Windows Server App Fabric see [Installing Windows Server App Fabric](https://go.microsoft.com/fwlink/?LinkId=193136).</span></span>  
  
### <a name="creating-a-simple-workflow-service"></a><span data-ttu-id="965ce-114">Création d'un service de workflow simple</span><span class="sxs-lookup"><span data-stu-id="965ce-114">Creating a Simple Workflow Service</span></span>  
  
1. <span data-ttu-id="965ce-115">Ouvrez Visual Studio 2012 et chargez la solution OrderProcessing que vous avez créé dans le [création d’un Service de flux de travail de longue](../../../../docs/framework/wcf/feature-details/creating-a-long-running-workflow-service.md) rubrique.</span><span class="sxs-lookup"><span data-stu-id="965ce-115">Open Visual Studio 2012 and load the OrderProcessing solution you created in the [Creating a Long-running Workflow Service](../../../../docs/framework/wcf/feature-details/creating-a-long-running-workflow-service.md) topic.</span></span>  
  
2. <span data-ttu-id="965ce-116">Bouton droit sur le **OrderService** de projet et sélectionnez **propriétés** et sélectionnez le **Web** onglet.</span><span class="sxs-lookup"><span data-stu-id="965ce-116">Right click the **OrderService** project and select **Properties** and select the **Web** tab.</span></span>  
  
3. <span data-ttu-id="965ce-117">Dans le **Action de démarrage** section de la page de propriétés, sélectionnez **Page spécifique** et tapez Service1.xamlx dans la zone d’édition.</span><span class="sxs-lookup"><span data-stu-id="965ce-117">In the **Start Action** section of the property page select **Specific Page** and type Service1.xamlx in the edit box.</span></span>  
  
4. <span data-ttu-id="965ce-118">Dans le **serveurs** section de la page de propriétés, sélectionnez **utiliser le serveur Web IIS Local** et tapez l’URL suivante : `http://localhost/OrderService`.</span><span class="sxs-lookup"><span data-stu-id="965ce-118">In the **Servers** section of the property page select **Use Local IIS Web Server** and type in the following URL: `http://localhost/OrderService`.</span></span>  
  
5. <span data-ttu-id="965ce-119">Cliquez sur le **créer un répertoire virtuel** bouton.</span><span class="sxs-lookup"><span data-stu-id="965ce-119">Click the **Create Virtual Directory** button.</span></span> <span data-ttu-id="965ce-120">Cette opération crée un répertoire virtuel et configure le projet de sorte que les fichiers nécessaires soient copiés dans ce répertoire virtuel lorsque le projet est généré.</span><span class="sxs-lookup"><span data-stu-id="965ce-120">This will create a new virtual directory and set up the project to copy the needed files to the virtual directory when the project is built.</span></span>  <span data-ttu-id="965ce-121">Vous avez toutefois la possibilité de copier manuellement les fichiers .xamlx, web.config et les DLL requises dans le répertoire virtuel.</span><span class="sxs-lookup"><span data-stu-id="965ce-121">Alternatively you could manually copy the .xamlx, the web.config, and any needed DLLs to the virtual directory.</span></span>  
  
### <a name="configuring-a-workflow-service-hosted-in-windows-server-app-fabric"></a><span data-ttu-id="965ce-122">Configuration d'un service de workflow hébergé dans Windows Server App Fabric</span><span class="sxs-lookup"><span data-stu-id="965ce-122">Configuring a Workflow Service Hosted in Windows Server App Fabric</span></span>  
  
1. <span data-ttu-id="965ce-123">Ouvrez le Gestionnaire des services IIS (inetmgr.exe).</span><span class="sxs-lookup"><span data-stu-id="965ce-123">Open Internet Information Services Manager (inetmgr.exe).</span></span>  
  
2. <span data-ttu-id="965ce-124">Accédez au répertoire virtuel OrderService dans le **connexions** volet.</span><span class="sxs-lookup"><span data-stu-id="965ce-124">Navigate to the OrderService virtual directory in the **Connections** pane.</span></span>  
  
3. <span data-ttu-id="965ce-125">Cliquez avec le bouton droit sur OrderService et sélectionnez **gérer les Services WCF et WF**, **configurer...** .</span><span class="sxs-lookup"><span data-stu-id="965ce-125">Right click OrderService and select **Manage WCF and WF Services**, **Configure…**.</span></span> <span data-ttu-id="965ce-126">Le **configurer WCF et WF pour l’Application** boîte de dialogue s’affiche.</span><span class="sxs-lookup"><span data-stu-id="965ce-126">The **Configure WCF and WF for Application** dialog box is displayed.</span></span>  
  
4. <span data-ttu-id="965ce-127">Sélectionnez le **général** onglet pour afficher des informations générales sur l’application comme illustré dans la capture d’écran suivante.</span><span class="sxs-lookup"><span data-stu-id="965ce-127">Select the **General** tab to display general information about the application as shown in the following screenshot.</span></span>  
  
     <span data-ttu-id="965ce-128">![Onglet Général de la boîte de dialogue de Configuration AppFabric](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-general.gif "AppFabricConfiguration-général")</span><span class="sxs-lookup"><span data-stu-id="965ce-128">![General tab of the App Fabric Configuration dialog](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-general.gif "AppFabricConfiguration-General")</span></span>  
  
5. <span data-ttu-id="965ce-129">Sélectionnez le **surveillance** onglet. Cela montre divers paramètres de surveillance comme indiqué dans la capture d’écran suivante.</span><span class="sxs-lookup"><span data-stu-id="965ce-129">Select the **Monitoring** tab. This shows various monitoring settings as shown in the following screenshot.</span></span>  
  
     <span data-ttu-id="965ce-130">![Onglet analyse de Configuration d’infrastructure d’application](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-monitoring.gif "AppFabricConfiguration-surveillance")</span><span class="sxs-lookup"><span data-stu-id="965ce-130">![App Fabric Configuration Monitoring tab](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-monitoring.gif "AppFabricConfiguration-Monitoring")</span></span>  
  
     <span data-ttu-id="965ce-131">Pour plus d’informations sur la configuration du service de flux de travail surveillance dans App Fabric consultez [configuration de la surveillance avec App Fabric](https://go.microsoft.com/fwlink/?LinkId=193153).</span><span class="sxs-lookup"><span data-stu-id="965ce-131">For more information about configuring workflow service monitoring in App Fabric see [Configuring monitoring with App Fabric](https://go.microsoft.com/fwlink/?LinkId=193153).</span></span>  
  
6. <span data-ttu-id="965ce-132">Sélectionnez le **persistance de Workflow** onglet. Cela vous permet de configurer votre application pour utiliser le fournisseur de persistance par défaut de Fabric application comme indiqué dans la capture d’écran suivante.</span><span class="sxs-lookup"><span data-stu-id="965ce-132">Select the **Workflow Persistence** tab. This allows you to configure your application to use App Fabric’s default persistence provider as shown in the following screenshot.</span></span>  
  
     <span data-ttu-id="965ce-133">![Configuration AppFabric &#45; persistance](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-persistence.gif "AppFabricConfiguration-persistance")</span><span class="sxs-lookup"><span data-stu-id="965ce-133">![App Fabric Configuration &#45; Persistence](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-persistence.gif "AppFabricConfiguration-Persistence")</span></span>  
  
     <span data-ttu-id="965ce-134">Pour plus d’informations sur la configuration de la persistance de workflow dans Windows Server AppFabric, consultez [configuration de la persistance de Workflow dans App Fabric](https://go.microsoft.com/fwlink/?LinkId=193148).</span><span class="sxs-lookup"><span data-stu-id="965ce-134">For more information about configuring workflow persistence in Windows Server App Fabric see [Configuring Workflow Persistence in App Fabric](https://go.microsoft.com/fwlink/?LinkId=193148).</span></span>  
  
7. <span data-ttu-id="965ce-135">Sélectionnez le **gestion des hôtes de flux de travail** onglet. Cela vous permet de spécifier quand les instances de service de workflow inactives doivent être déchargés et rendues persistantes, comme illustré dans la capture d’écran suivante.</span><span class="sxs-lookup"><span data-stu-id="965ce-135">Select the **Workflow Host Management** tab. This allows you to specify when idle workflow service instances should be unloaded and persisted as shown in the following screenshot.</span></span>  
  
     <span data-ttu-id="965ce-136">![Gestion des hôtes de flux de travail Configuration AppFabric](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-management.gif "AppFabricConfiguration-gestion")</span><span class="sxs-lookup"><span data-stu-id="965ce-136">![App Fabric Configuration  Workflow Host Management](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-management.gif "AppFabricConfiguration-Management")</span></span>  
  
     <span data-ttu-id="965ce-137">Pour plus d’informations sur la configuration de gestion de flux de travail hôte consultez [gestion des hôtes configuration de Workflow dans App Fabric](https://go.microsoft.com/fwlink/?LinkId=193151).</span><span class="sxs-lookup"><span data-stu-id="965ce-137">For more information about workflow host management configuration see [Configuring Workflow Host Management in App Fabric](https://go.microsoft.com/fwlink/?LinkId=193151).</span></span>  
  
8. <span data-ttu-id="965ce-138">Sélectionnez le **démarrage automatique** onglet. Cela vous permet de spécifier les paramètres de démarrage automatique pour les services de flux de travail dans l’application, comme illustré dans la capture d’écran suivante.</span><span class="sxs-lookup"><span data-stu-id="965ce-138">Select the **Auto-Start** tab. This allows you to specify auto-start settings for the workflow services in the application as shown in the following screenshot.</span></span>  
  
     ![Capture d’écran montrant l’application Fabric automatique&#45;démarrer la configuration.](./media/how-to-host-a-workflow-service-with-windows-server-app-fabric/app-fabric-auto-start-configuration.gif)  
  
     <span data-ttu-id="965ce-140">Pour plus d’informations sur la configuration de démarrage automatique, consultez [configuration de démarrage automatique avec App Fabric](https://go.microsoft.com/fwlink/?LinkId=193150).</span><span class="sxs-lookup"><span data-stu-id="965ce-140">For more information about configuring Auto-Start see [Configuring Auto-Start with App Fabric](https://go.microsoft.com/fwlink/?LinkId=193150).</span></span>  
  
9. <span data-ttu-id="965ce-141">Sélectionnez le **limitation** onglet. Cela vous permet de configurer les paramètres de limitation pour le service de flux de travail, comme indiqué dans la capture d’écran suivante.</span><span class="sxs-lookup"><span data-stu-id="965ce-141">Select the **Throttling** tab. This allows you to configure throttling settings for the workflow service as shown in the following screenshot.</span></span>  
  
     ![Capture d’écran montrant App Fabric, la configuration d’accélération.](./media/how-to-host-a-workflow-service-with-windows-server-app-fabric/app-fabric-throttling-configuration.gif)  
  
     <span data-ttu-id="965ce-143">Pour plus d’informations sur la configuration de la limitation consultez [configuration de la limitation avec App Fabric](https://go.microsoft.com/fwlink/?LinkId=193149).</span><span class="sxs-lookup"><span data-stu-id="965ce-143">For more information about configuring throttling see [Configuring Throttling with App Fabric](https://go.microsoft.com/fwlink/?LinkId=193149).</span></span>  
  
10. <span data-ttu-id="965ce-144">Sélectionnez le **sécurité** onglet. Cela vous permet de configurer les paramètres de sécurité pour l’application, comme illustré dans la capture d’écran suivante.</span><span class="sxs-lookup"><span data-stu-id="965ce-144">Select the **Security** tab. This allows you to configure security settings for the application as shown in the following screenshot.</span></span>  
  
     <span data-ttu-id="965ce-145">![Configuration de la sécurité AppFabric](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-security.gif "AppFabricConfiguration-sécurité")</span><span class="sxs-lookup"><span data-stu-id="965ce-145">![App Fabric Security Configuration](../../../../docs/framework/wcf/feature-details/media/appfabricconfiguration-security.gif "AppFabricConfiguration-Security")</span></span>  
  
     <span data-ttu-id="965ce-146">Pour plus d’informations sur la configuration de la sécurité avec Windows Server AppFabric, consultez [configuration de la sécurité avec App Fabric](https://go.microsoft.com/fwlink/?LinkId=193152).</span><span class="sxs-lookup"><span data-stu-id="965ce-146">For more information about configuring security with Windows Server App Fabric see [Configuring Security with App Fabric](https://go.microsoft.com/fwlink/?LinkId=193152).</span></span>  
  
### <a name="using-windows-server-app-fabric"></a><span data-ttu-id="965ce-147">Utilisation de Windows Server App Fabric</span><span class="sxs-lookup"><span data-stu-id="965ce-147">Using Windows Server App Fabric</span></span>  
  
1. <span data-ttu-id="965ce-148">Générez la solution pour copier les fichiers nécessaires dans le répertoire virtuel.</span><span class="sxs-lookup"><span data-stu-id="965ce-148">Build the solution to copy the necessary files to the virtual directory.</span></span>  
  
2. <span data-ttu-id="965ce-149">Cliquez avec le bouton droit sur le projet OrderClient et sélectionnez **déboguer**, **démarrer une nouvelle Instance** pour lancer l’application cliente.</span><span class="sxs-lookup"><span data-stu-id="965ce-149">Right click the OrderClient project and select **Debug**, **Start New Instance** to launch the client application.</span></span>  
  
3. <span data-ttu-id="965ce-150">Le client s’exécute et Visual Studio affiche un **attacher un avertissement de sécurité** boîte de dialogue, cliquez sur le **ne pas attacher** bouton.</span><span class="sxs-lookup"><span data-stu-id="965ce-150">The client will run and Visual Studio will display an **Attach Security Warning** dialog box, click the **Don’t Attach** button.</span></span> <span data-ttu-id="965ce-151">Cela indique à Visual Studio de ne pas attacher le débogueur au processus IIS pour le débogage.</span><span class="sxs-lookup"><span data-stu-id="965ce-151">This tells Visual Studio to not attach to the IIS process for debugging.</span></span>  
  
4. <span data-ttu-id="965ce-152">L'application cliente appelle immédiatement le service de workflow, puis attend.</span><span class="sxs-lookup"><span data-stu-id="965ce-152">The client application will immediately call the Workflow service and then wait.</span></span> <span data-ttu-id="965ce-153">Le service de workflow devient inactif, puis est rendu persistant.</span><span class="sxs-lookup"><span data-stu-id="965ce-153">The workflow service will go idle and be persisted.</span></span> <span data-ttu-id="965ce-154">Vous pouvez le vérifier en démarrant Internet Information Services (inetmgr.exe), en accédant à OrderService dans le volet Connexions, puis en le sélectionnant.</span><span class="sxs-lookup"><span data-stu-id="965ce-154">You can verify this by starting Internet Information Services (inetmgr.exe), navigating to the OrderService in the Connections pane and selecting it.</span></span> <span data-ttu-id="965ce-155">Ensuite, cliquez sur l'icône Tableau de bord d'AppFabric dans le volet droit.</span><span class="sxs-lookup"><span data-stu-id="965ce-155">Next, click the App Fabric Dashboard icon in the right-hand pane.</span></span> <span data-ttu-id="965ce-156">Sous Instances WF persistantes vous pouvez constater qu’une instance de service de workflow persistantes comme indiqué dans la capture d’écran suivante.</span><span class="sxs-lookup"><span data-stu-id="965ce-156">Under Persisted WF Instances you will see there is one persisted workflow service instance as shown in the following screenshot.</span></span>  
  
     ![Capture d’écran montrant le tableau de bord de Fabric application.](./media/how-to-host-a-workflow-service-with-windows-server-app-fabric/app-fabric-dashboard.gif)  
  
     <span data-ttu-id="965ce-158">Le **historique des instances WF** répertorie des informations sur le service de workflow, telles que le nombre d’activations de service de flux de travail, le nombre d’exécutions d’instances de service de flux de travail et le nombre d’instances de workflow avec des erreurs.</span><span class="sxs-lookup"><span data-stu-id="965ce-158">The **WF Instance History** lists information about the workflow service such as the number of workflow service activations, the number of workflow service instance completions, and the number of workflow instances with failures.</span></span> <span data-ttu-id="965ce-159">Sous instances actives ou inactives qu'un lien s’affiche, vous en cliquant sur le lien pour afficher plus d’informations sur les instances de workflow inactives, comme indiqué dans la capture d’écran suivante.</span><span class="sxs-lookup"><span data-stu-id="965ce-159">Under Active or Idle instances a link will be displayed, clicking on the link will display more information about the idle workflow instances as shown in the following screenshot.</span></span>  
  
     ![Capture d’écran montrant les détails de l’Instance du Workflow persistantes.](./media/how-to-host-a-workflow-service-with-windows-server-app-fabric/persisted-workflow-instance-detail.gif)  
  
     <span data-ttu-id="965ce-161">Pour plus d’informations sur Windows Server AppFabric, fonctionnalités et comment les utiliser consultez [fonctionnalités d’hébergement Windows Server App Fabric](https://go.microsoft.com/fwlink/?LinkID=193143&clcid=0x409)</span><span class="sxs-lookup"><span data-stu-id="965ce-161">For more information about Windows Server App Fabric features and how to use them see [Windows Server App Fabric Hosting Features](https://go.microsoft.com/fwlink/?LinkID=193143&clcid=0x409)</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="965ce-162">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="965ce-162">See also</span></span>

- [<span data-ttu-id="965ce-163">Création d’un service de workflow de longue durée</span><span class="sxs-lookup"><span data-stu-id="965ce-163">Creating a Long-running Workflow Service</span></span>](../../../../docs/framework/wcf/feature-details/creating-a-long-running-workflow-service.md)
- [<span data-ttu-id="965ce-164">Fonctionnalités d’hébergement de Windows Server AppFabric</span><span class="sxs-lookup"><span data-stu-id="965ce-164">Windows Server App Fabric Hosting Features</span></span>](https://go.microsoft.com/fwlink/?LinkId=193143)
- [<span data-ttu-id="965ce-165">L’installation de Windows Server AppFabric</span><span class="sxs-lookup"><span data-stu-id="965ce-165">Installing Windows Server App Fabric</span></span>](https://go.microsoft.com/fwlink/?LinkId=193136)
- [<span data-ttu-id="965ce-166">Documentation de Windows Server AppFabric</span><span class="sxs-lookup"><span data-stu-id="965ce-166">Windows Server App Fabric Documentation</span></span>](https://go.microsoft.com/fwlink/?LinkID=193037&clcid=0x409)
