---
title: 'Procédure : accéder à un service à partir d’une application de workflow'
ms.date: 03/30/2017
ms.assetid: 925ef8ea-5550-4c9d-bb7b-209e20c280ad
ms.openlocfilehash: 178fb04244cb3e5075722877fdd3e2b5a92b8502
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/18/2019
ms.locfileid: "59309314"
---
# <a name="how-to-access-a-service-from-a-workflow-application"></a><span data-ttu-id="efc69-102">Procédure : accéder à un service à partir d’une application de workflow</span><span class="sxs-lookup"><span data-stu-id="efc69-102">How To: Access a Service From a Workflow Application</span></span>
<span data-ttu-id="efc69-103">Cette rubrique décrit comment appeler un service de workflow à partir d'une application console de workflow.</span><span class="sxs-lookup"><span data-stu-id="efc69-103">This topic describes how to call a workflow service from a workflow console application.</span></span> <span data-ttu-id="efc69-104">Cela dépend à la fin de la [Comment : Créer un Service de flux de travail avec les activités de messagerie](../../../../docs/framework/wcf/feature-details/how-to-create-a-workflow-service-with-messaging-activities.md) rubrique.</span><span class="sxs-lookup"><span data-stu-id="efc69-104">It depends on completion of the [How to: Create a Workflow Service with Messaging Activities](../../../../docs/framework/wcf/feature-details/how-to-create-a-workflow-service-with-messaging-activities.md) topic.</span></span> <span data-ttu-id="efc69-105">Bien que cette rubrique décrit comment appeler un service de workflow à partir d’une application de workflow, les mêmes méthodes peuvent servir à appeler n’importe quel service Windows Communication Foundation (WCF) à partir d’une application de workflow.</span><span class="sxs-lookup"><span data-stu-id="efc69-105">Although this topic describes how to call a workflow service from a workflow application, the same methods can be used to call any Windows Communication Foundation (WCF) service from a workflow application.</span></span>

### <a name="create-a-workflow-console-application-project"></a><span data-ttu-id="efc69-106">Créer un projet d'application console de workflow.</span><span class="sxs-lookup"><span data-stu-id="efc69-106">Create a Workflow Console Application Project</span></span>

1. <span data-ttu-id="efc69-107">Démarrez Visual Studio 2012.</span><span class="sxs-lookup"><span data-stu-id="efc69-107">Start Visual Studio 2012.</span></span>

2. <span data-ttu-id="efc69-108">Charger le projet mywfservice que vous avez créé dans le [Comment : Créer un Service de flux de travail avec les activités de messagerie](../../../../docs/framework/wcf/feature-details/how-to-create-a-workflow-service-with-messaging-activities.md) rubrique.</span><span class="sxs-lookup"><span data-stu-id="efc69-108">Load the MyWFService project you created in the [How to: Create a Workflow Service with Messaging Activities](../../../../docs/framework/wcf/feature-details/how-to-create-a-workflow-service-with-messaging-activities.md) topic.</span></span>

3. <span data-ttu-id="efc69-109">Bouton droit sur le **MyWFService** solution dans le **l’Explorateur de solutions** et sélectionnez **ajouter**, **nouveau projet**.</span><span class="sxs-lookup"><span data-stu-id="efc69-109">Right click the **MyWFService** solution in the **Solution Explorer** and select **Add**, **New Project**.</span></span> <span data-ttu-id="efc69-110">Sélectionnez **Workflow** dans le **modèles installés** et **Application Console de Workflow** dans la liste des types de projets.</span><span class="sxs-lookup"><span data-stu-id="efc69-110">Select **Workflow** in the **Installed Templates** and **Workflow Console Application** from the list of project types.</span></span> <span data-ttu-id="efc69-111">Nommez le projet MyWFClient et utilisez l'emplacement par défaut, comme indiqué dans l'illustration suivante.</span><span class="sxs-lookup"><span data-stu-id="efc69-111">Name the project MyWFClient and use the default location as shown in the following illustration.</span></span>

     ![Ajouter une nouvelle boîte de dialogue Nouveau projet](./media/how-to-access-a-service-from-a-workflow-application/add-new-project-dialog.jpg)

     <span data-ttu-id="efc69-113">Cliquez sur le **OK** bouton pour fermer la **nouveau projet boîte de dialogue Ajouter**.</span><span class="sxs-lookup"><span data-stu-id="efc69-113">Click the **OK** button to dismiss the **Add New Project Dialog**.</span></span>

4. <span data-ttu-id="efc69-114">Après avoir créé le projet, le fichier Workflow1.xaml s'ouvre dans le concepteur.</span><span class="sxs-lookup"><span data-stu-id="efc69-114">After the project is created, the Workflow1.xaml file is opened in the designer.</span></span> <span data-ttu-id="efc69-115">Cliquez sur le **boîte à outils** onglet pour ouvrir la boîte à outils si elle n’est pas déjà ouvert puis cliquez sur la punaise pour garder la fenêtre Boîte à outils ouverte.</span><span class="sxs-lookup"><span data-stu-id="efc69-115">Click the **Toolbox** tab to open the toolbox if it is not already open and click the pushpin to keep the toolbox window open.</span></span>

5. <span data-ttu-id="efc69-116">Appuyez sur **Ctrl**+**F5** pour générer et lancer le service.</span><span class="sxs-lookup"><span data-stu-id="efc69-116">Press **Ctrl**+**F5** to build and launch the service.</span></span> <span data-ttu-id="efc69-117">Comme auparavant, le Serveur de développement ASP.NET se lance et Internet Explorer affiche la page d'aide WCF.</span><span class="sxs-lookup"><span data-stu-id="efc69-117">As before, the ASP.NET Development Server is launched and Internet Explorer displays the WCF Help Page.</span></span> <span data-ttu-id="efc69-118">Notez l'URI de cette page, car vous devez l'utiliser dans l'étape suivante.</span><span class="sxs-lookup"><span data-stu-id="efc69-118">Notice the URI for this page as you must use it in the next step.</span></span>

     ![IE affichant la page d’aide WCF et URI](./media/how-to-access-a-service-from-a-workflow-application/ie-wcf-help-page-uri.jpg)

6. <span data-ttu-id="efc69-120">Bouton droit sur le **MyWFClient** de projet dans le **l’Explorateur de solutions** et sélectionnez **ajouter** > **une référence de Service**.</span><span class="sxs-lookup"><span data-stu-id="efc69-120">Right click the **MyWFClient** project in the **Solution Explorer** and select **Add** > **Service Reference**.</span></span> <span data-ttu-id="efc69-121">Cliquez sur le **Discover** bouton pour rechercher la solution actuelle pour tous les services.</span><span class="sxs-lookup"><span data-stu-id="efc69-121">Click the **Discover** button to search the current solution for any services.</span></span> <span data-ttu-id="efc69-122">Cliquez sur le triangle à côté de Service1.xamlx dans la liste des services.</span><span class="sxs-lookup"><span data-stu-id="efc69-122">Click the triangle next to Service1.xamlx in the Services list.</span></span> <span data-ttu-id="efc69-123">Cliquez sur le triangle à côté de Service1 pour répertorier les contrats implémentés par le service Service1.</span><span class="sxs-lookup"><span data-stu-id="efc69-123">Click the triangle next to Service1 to list the contracts implemented by the Service1 service.</span></span> <span data-ttu-id="efc69-124">Développez le **Service1** nœud dans le **Services** liste.</span><span class="sxs-lookup"><span data-stu-id="efc69-124">Expand the **Service1** node in the **Services** list.</span></span> <span data-ttu-id="efc69-125">L’opération Echo est affichée dans le **opérations** liste comme indiqué dans l’illustration suivante.</span><span class="sxs-lookup"><span data-stu-id="efc69-125">The Echo operation is displayed in the **Operations** list as shown in the following illustration.</span></span>

     ![Boîte de dialogue Ajouter une référence de service](./media/how-to-access-a-service-from-a-workflow-application/add-service-reference.jpg)

     <span data-ttu-id="efc69-127">Conservez l’espace de noms par défaut et cliquez sur **OK** pour faire disparaître le **ajouter une référence de Service** boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="efc69-127">Keep the default namespace and click **OK** to dismiss the **Add Service Reference** dialog.</span></span> <span data-ttu-id="efc69-128">La boîte de dialogue suivante s'affiche.</span><span class="sxs-lookup"><span data-stu-id="efc69-128">The following dialog is displayed.</span></span>

     ![Ajouter la boîte de dialogue de Notification de référence de Service](./media/how-to-access-a-service-from-a-workflow-application/add-service-reference-dialog.jpg)

     <span data-ttu-id="efc69-130">Cliquez sur **OK** pour faire disparaître la boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="efc69-130">Click **OK** to dismiss the dialog.</span></span> <span data-ttu-id="efc69-131">Appuyez ensuite sur Ctrl+Maj+B pour générer la solution.</span><span class="sxs-lookup"><span data-stu-id="efc69-131">Next, press CTRL+SHIFT+B to build the solution.</span></span> <span data-ttu-id="efc69-132">Notez que dans la boîte à outils a été ajoutée une nouvelle section appelée **MyWFClient.ServiceReference1.Activities**.</span><span class="sxs-lookup"><span data-stu-id="efc69-132">Notice in the toolbox a new section has been added called **MyWFClient.ServiceReference1.Activities**.</span></span> <span data-ttu-id="efc69-133">Développez cette section ; l’activité Echo a été ajoutée comme indiqué dans l’illustration suivante.</span><span class="sxs-lookup"><span data-stu-id="efc69-133">Expand this section and notice the Echo activity that has been added as shown in the following illustration.</span></span>

     ![Activité Echo dans la boîte à outils](./media/how-to-access-a-service-from-a-workflow-application/echo-activity-toolbox.jpg)

7. <span data-ttu-id="efc69-135">Faites glisser une activité <xref:System.Activities.Statements.Sequence> sur l'aire du concepteur.</span><span class="sxs-lookup"><span data-stu-id="efc69-135">Drag and drop a <xref:System.Activities.Statements.Sequence> activity onto the designer surface.</span></span> <span data-ttu-id="efc69-136">Il se trouve sous le **flux de contrôle** section de la boîte à outils.</span><span class="sxs-lookup"><span data-stu-id="efc69-136">It is under the **Control Flow** section of the toolbox.</span></span>

8. <span data-ttu-id="efc69-137">Avec le <xref:System.Activities.Statements.Sequence> activité en mode focus, cliquez sur le **Variables** lier et ajoutez une variable de chaîne nommée `inString`.</span><span class="sxs-lookup"><span data-stu-id="efc69-137">With the <xref:System.Activities.Statements.Sequence> activity in focus, click the **Variables** link and add a string variable named `inString`.</span></span> <span data-ttu-id="efc69-138">Affectez la valeur par défaut à la variable `"Hello, world"` ainsi que d’une variable chaîne nommée `outString` comme indiqué dans le diagramme suivant.</span><span class="sxs-lookup"><span data-stu-id="efc69-138">Give the variable a default value of `"Hello, world"` as well as a string variable named `outString` as shown in the following diagram.</span></span>

     ![Ajout d’une variable inString](./media/how-to-access-a-service-from-a-workflow-application/add-instring-variable.jpg)

9. <span data-ttu-id="efc69-140">Faites glisser et déposez une **Echo** l’activité dans le <xref:System.Activities.Statements.Sequence>.</span><span class="sxs-lookup"><span data-stu-id="efc69-140">Drag and drop an **Echo** activity into the <xref:System.Activities.Statements.Sequence>.</span></span> <span data-ttu-id="efc69-141">Dans la fenêtre Propriétés lier le `inMsg` l’argument de la `inString` variable et la `outMsg` l’argument de la `outString` variable, comme indiqué dans l’illustration suivante.</span><span class="sxs-lookup"><span data-stu-id="efc69-141">In the properties window bind the `inMsg` argument to the `inString` variable and the `outMsg` argument to the `outString` variable as shown in the following illustration.</span></span> <span data-ttu-id="efc69-142">Cela transmet la valeur de la variable `inString` à l'opération, puis prend la valeur de retour et la place dans la variable `outString`.</span><span class="sxs-lookup"><span data-stu-id="efc69-142">This passes in the value of the `inString` variable to the operation and then takes the return value and places it in the `outString` variable.</span></span>

     ![Lier les arguments à des variables](./media/how-to-access-a-service-from-a-workflow-application/bind-arguments-variables.jpg)

10. <span data-ttu-id="efc69-144">Faites glisser et déposez un **WriteLine** activité ci-dessous le **Echo** activité pour afficher la chaîne retournée par l’appel de service.</span><span class="sxs-lookup"><span data-stu-id="efc69-144">Drag and drop a **WriteLine** activity below the **Echo** activity to display the string returned by the service call.</span></span> <span data-ttu-id="efc69-145">Le **WriteLine** activité se trouve dans le **Primitives** nœud dans la boîte à outils.</span><span class="sxs-lookup"><span data-stu-id="efc69-145">The **WriteLine** activity is located in the **Primitives** node in the toolbox.</span></span> <span data-ttu-id="efc69-146">Lier le **texte** argument de la **WriteLine** activité à la `outString` variable en tapant `outString` dans la zone de texte sur le **WriteLine** activité.</span><span class="sxs-lookup"><span data-stu-id="efc69-146">Bind the **Text** argument of the **WriteLine** activity to the `outString` variable by typing `outString` into the text box on the **WriteLine** activity.</span></span> <span data-ttu-id="efc69-147">Le workflow doit maintenant ressembler à l'illustration suivante.</span><span class="sxs-lookup"><span data-stu-id="efc69-147">The workflow should now look like the following illustration.</span></span>

     ![Flux de travail client complet](./media/how-to-access-a-service-from-a-workflow-application/complete-client-workflow.jpg)

11. <span data-ttu-id="efc69-149">Avec le bouton droit de la solution MyWFService et sélectionnez **définir les projets de démarrage...** . Sélectionnez le **plusieurs projets de démarrage** case d’option et sélectionnez **Démarrer** pour chaque projet dans le **Action** colonne comme indiqué dans l’illustration suivante.</span><span class="sxs-lookup"><span data-stu-id="efc69-149">Right-click the MyWFService solution and select **Set Startup Projects ...**. Select the **Multiple startup projects** radio button and select **Start** for each project in the **Action** column as shown in the following illustration.</span></span>

     ![Options des projets de démarrage](./media/how-to-access-a-service-from-a-workflow-application/startup-project-options.jpg)

12. <span data-ttu-id="efc69-151">Appuyez sur Ctrl + F5 pour lancer à la fois le service et le client.</span><span class="sxs-lookup"><span data-stu-id="efc69-151">Press Ctrl + F5 to launch both the service and the client.</span></span> <span data-ttu-id="efc69-152">Le serveur de développement ASP.NET héberge le service, Internet Explorer affiche la page d’aide WCF et l’application de flux de travail cliente est lancée dans une fenêtre de console et affiche la chaîne retournée à partir du service (« Hello, world »).</span><span class="sxs-lookup"><span data-stu-id="efc69-152">The ASP.NET Development Server hosts the service, Internet Explorer displays the WCF help page, and the client workflow application is launched in a console window and displays the string returned from the service ("Hello, world").</span></span>

## <a name="see-also"></a><span data-ttu-id="efc69-153">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="efc69-153">See also</span></span>

- [<span data-ttu-id="efc69-154">Services de workflow</span><span class="sxs-lookup"><span data-stu-id="efc69-154">Workflow Services</span></span>](../../../../docs/framework/wcf/feature-details/workflow-services.md)
- [<span data-ttu-id="efc69-155">Guide pratique pour Créer un Service de flux de travail avec les activités de messagerie</span><span class="sxs-lookup"><span data-stu-id="efc69-155">How to: Create a Workflow Service with Messaging Activities</span></span>](../../../../docs/framework/wcf/feature-details/how-to-create-a-workflow-service-with-messaging-activities.md)
- [<span data-ttu-id="efc69-156">Utilisation d’un Service WCF à partir d’un flux de travail dans un projet Web</span><span class="sxs-lookup"><span data-stu-id="efc69-156">Consuming a WCF Service from a Workflow in a Web Project</span></span>](https://go.microsoft.com/fwlink/?LinkId=207725)
