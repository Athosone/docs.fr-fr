---
title: Scénarios synchrones utilisant HTTP, TCP ou Canal nommé
ms.date: 03/30/2017
ms.assetid: 7e90af1b-f8f6-41b9-a63a-8490ada502b1
ms.openlocfilehash: 28e612b190f4993e1ce7da0d1083c4e55f827d4a
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/23/2019
ms.locfileid: "61784866"
---
# <a name="synchronous-scenarios-using-http-tcp-or-named-pipe"></a><span data-ttu-id="dac6a-102">Scénarios synchrones utilisant HTTP, TCP ou Canal nommé</span><span class="sxs-lookup"><span data-stu-id="dac6a-102">Synchronous Scenarios using HTTP, TCP or Named-Pipe</span></span>
<span data-ttu-id="dac6a-103">Cette rubrique décrit les activités et transferts pour différents scénarios demande/réponse synchrones, avec un client à thread unique, utilisant une connexion HTTP, TCP ou de canal nommé.</span><span class="sxs-lookup"><span data-stu-id="dac6a-103">This topic describes the activities and transfers for different synchronous request/reply scenarios, with a single-threaded client, using HTTP, TCP or named pipe.</span></span> <span data-ttu-id="dac6a-104">Consultez [scénarios asynchrones utilisant HTTP, TCP ou canal nommé](../../../../../docs/framework/wcf/diagnostics/tracing/asynchronous-scenarios-using-http-tcp-or-named-pipe.md) pour plus d’informations sur les demandes multi-threads.</span><span class="sxs-lookup"><span data-stu-id="dac6a-104">See [Asynchronous Scenarios using HTTP, TCP, or Named-Pipe](../../../../../docs/framework/wcf/diagnostics/tracing/asynchronous-scenarios-using-http-tcp-or-named-pipe.md) for more information on multi-threaded requests.</span></span>  
  
## <a name="synchronous-requestreply-without-errors"></a><span data-ttu-id="dac6a-105">Demande/Réponse synchrone sans erreurs</span><span class="sxs-lookup"><span data-stu-id="dac6a-105">Synchronous Request/Reply without Errors</span></span>  
 <span data-ttu-id="dac6a-106">Cette section décrit les activités et transferts pour un scénario demande/réponse synchrone valide, avec un client à thread unique.</span><span class="sxs-lookup"><span data-stu-id="dac6a-106">This section describes the activities and transfers for a valid synchronous request/reply scenario, with single-threaded client.</span></span>  
  
### <a name="client"></a><span data-ttu-id="dac6a-107">Client</span><span class="sxs-lookup"><span data-stu-id="dac6a-107">Client</span></span>  
  
#### <a name="establishing-communication-with-service-endpoint"></a><span data-ttu-id="dac6a-108">Établissement de la communication avec le point de terminaison de service</span><span class="sxs-lookup"><span data-stu-id="dac6a-108">Establishing Communication with Service Endpoint</span></span>  
 <span data-ttu-id="dac6a-109">Un client est construit et ouvert.</span><span class="sxs-lookup"><span data-stu-id="dac6a-109">A client is constructed and opened.</span></span> <span data-ttu-id="dac6a-110">Pour chacune de ces étapes, l’activité ambiante (A) est transférée à un « Client de construction » (B) et « Client ouvert » (C) activité respectivement.</span><span class="sxs-lookup"><span data-stu-id="dac6a-110">For each of these steps, the ambient activity (A) is transferred to a "Construct Client" (B) and "Open Client" (C) activity respectively.</span></span> <span data-ttu-id="dac6a-111">Pour chaque activité vers laquelle le transfert est effectué, l'activité ambiante est interrompue jusqu'à ce qu'un transfert de retour ait lieu, autrement dit jusqu'à ce que le code ServiceModel soit exécuté.</span><span class="sxs-lookup"><span data-stu-id="dac6a-111">For each activity being transferred to, the ambient activity is suspended until there is a transfer back, that is, until ServiceModel code is executed.</span></span>  
  
#### <a name="making-a-request-to-service-endpoint"></a><span data-ttu-id="dac6a-112">Exécution d'une demande au point de terminaison de service</span><span class="sxs-lookup"><span data-stu-id="dac6a-112">Making a Request to Service Endpoint</span></span>  
 <span data-ttu-id="dac6a-113">L’activité ambiante est transférée à une activité « ProcessAction » (D).</span><span class="sxs-lookup"><span data-stu-id="dac6a-113">The ambient activity is transferred to a "ProcessAction" (D) activity.</span></span> <span data-ttu-id="dac6a-114">Dans cette activité, un message de demande est envoyé et un message de réponse est reçu.</span><span class="sxs-lookup"><span data-stu-id="dac6a-114">Within this activity, a request message is sent, and a response message is received.</span></span> <span data-ttu-id="dac6a-115">L'activité se termine lorsque le contrôle retourne au code utilisateur.</span><span class="sxs-lookup"><span data-stu-id="dac6a-115">The activity ends when control returns to user code.</span></span> <span data-ttu-id="dac6a-116">Étant donné qu'il s'agit d'une demande synchrone, l'activité ambiante s'interrompt jusqu'à ce que le contrôle soit retourné.</span><span class="sxs-lookup"><span data-stu-id="dac6a-116">Because this is a synchronous request, the ambient activity suspends until control returns.</span></span>  
  
#### <a name="closing-communication-with-service-endpoint"></a><span data-ttu-id="dac6a-117">Fermeture de la communication avec le point de terminaison de service</span><span class="sxs-lookup"><span data-stu-id="dac6a-117">Closing Communication with Service Endpoint</span></span>  
 <span data-ttu-id="dac6a-118">L'activité de fermeture du client (I) est créée à partir de l'activité ambiante.</span><span class="sxs-lookup"><span data-stu-id="dac6a-118">The client's close activity (I) is created from the ambient activity.</span></span> <span data-ttu-id="dac6a-119">Ceci est identique aux activités nouvelle et ouverte.</span><span class="sxs-lookup"><span data-stu-id="dac6a-119">This is identical to new and open.</span></span>  
  
### <a name="server"></a><span data-ttu-id="dac6a-120">Serveur</span><span class="sxs-lookup"><span data-stu-id="dac6a-120">Server</span></span>  
  
#### <a name="setting-up-a-service-host"></a><span data-ttu-id="dac6a-121">Configuration d'un hôte de service</span><span class="sxs-lookup"><span data-stu-id="dac6a-121">Setting up a Service Host</span></span>  
 <span data-ttu-id="dac6a-122">Les activités nouvelle et ouverte (N et O) du ServiceHost sont créées à partir de l'activité ambiante (M).</span><span class="sxs-lookup"><span data-stu-id="dac6a-122">The ServiceHost’s new and open activities (N and O) are created from the ambient activity (M).</span></span>  
  
 <span data-ttu-id="dac6a-123">Une activité d'écoute (P) est créée à partir de l'ouverture d'un ServiceHost pour chaque écouteur.</span><span class="sxs-lookup"><span data-stu-id="dac6a-123">A listener activity (P) is created from opening a ServiceHost for each listener.</span></span> <span data-ttu-id="dac6a-124">L'activité d'écoute attend de recevoir et de traiter des données.</span><span class="sxs-lookup"><span data-stu-id="dac6a-124">The listener activity waits to receive and process data.</span></span>  
  
#### <a name="receiving-data-on-the-wire"></a><span data-ttu-id="dac6a-125">Réception de données sur le câble</span><span class="sxs-lookup"><span data-stu-id="dac6a-125">Receiving Data on the Wire</span></span>  
 <span data-ttu-id="dac6a-126">Lorsque les données arrivent sur le câble, une activité « ReceiveBytes » est créée si elle n’existe pas déjà (Q) pour traiter les données reçues.</span><span class="sxs-lookup"><span data-stu-id="dac6a-126">When data arrives on the wire, a "ReceiveBytes" activity is created if it does not already exist (Q) to process the received data.</span></span> <span data-ttu-id="dac6a-127">Cette activité peut être réutilisée pour plusieurs messages dans une connexion ou une file d'attente.</span><span class="sxs-lookup"><span data-stu-id="dac6a-127">This activity can be reused for multiple messages within a connection or queue.</span></span>  
  
 <span data-ttu-id="dac6a-128">L'activité ReceiveBytes lance une activité ProcessMessage (R) si elle a suffisamment de données pour former un message d'action SOAP.</span><span class="sxs-lookup"><span data-stu-id="dac6a-128">The ReceiveBytes activity launches a ProcessMessage activity (R) if it has enough data to form a SOAP action message.</span></span>  
  
 <span data-ttu-id="dac6a-129">Dans l'activité R, les en-têtes de message sont traités et l'en-tête activityID est vérifié.</span><span class="sxs-lookup"><span data-stu-id="dac6a-129">In activity R, the message headers are processed, and the activityID header is verified.</span></span> <span data-ttu-id="dac6a-130">Si cet en-tête est présent, l'ID d'activité a pour valeur l'activité ProcessAction ; sinon, un nouvel ID est créé.</span><span class="sxs-lookup"><span data-stu-id="dac6a-130">If this header is present, the activity ID is set to the ProcessAction activity; otherwise, a new ID is created.</span></span>  
  
 <span data-ttu-id="dac6a-131">L'activité ProcessAction (S) est créée et un transfert vers elle est effectuée lorsque l'appel est traité.</span><span class="sxs-lookup"><span data-stu-id="dac6a-131">ProcessAction activity (S) is created and being transferred to, when the call is processed.</span></span> <span data-ttu-id="dac6a-132">Cette activité se termine lorsque tout le traitement lié au message entrant est achevé, y compris l'exécution du code utilisateur (T) et l'envoi du message de réponse le cas échéant.</span><span class="sxs-lookup"><span data-stu-id="dac6a-132">This activity ends when all processing related to the incoming message is completed, including executing user code (T) and sending the response message if applicable.</span></span>  
  
#### <a name="closing-a-service-host"></a><span data-ttu-id="dac6a-133">Fermeture d'un hôte de service</span><span class="sxs-lookup"><span data-stu-id="dac6a-133">Closing a Service Host</span></span>  
 <span data-ttu-id="dac6a-134">L'activité de fermeture (Z) de ServiceHost est créée à partir de l'activité ambiante.</span><span class="sxs-lookup"><span data-stu-id="dac6a-134">The ServiceHost’s close activity (Z) is created from the ambient activity.</span></span>  
  
 ![Diagramme montrant les scénarios synchrones : HTTP, TCP ou canaux nommés.](./media/synchronous-scenarios-using-http-tcp-or-named-pipe/synchronous-scenario-http-tcp-named-pipes.gif)  
  
 <span data-ttu-id="dac6a-136">Dans \<A: name >, `A` est un symbole de raccourci qui décrit l’activité dans le texte précédent et dans le tableau 3.</span><span class="sxs-lookup"><span data-stu-id="dac6a-136">In \<A: name>, `A` is a shortcut symbol that describes the activity in the previous text and in table 3.</span></span> <span data-ttu-id="dac6a-137">`Name` est un nom raccourci de l'activité.</span><span class="sxs-lookup"><span data-stu-id="dac6a-137">`Name` is a shortened name of the activity.</span></span>  
  
 <span data-ttu-id="dac6a-138">Si `propagateActivity` = `true`, traiter l’Action sur le client et le service ont le même ID d’activité.</span><span class="sxs-lookup"><span data-stu-id="dac6a-138">If `propagateActivity`=`true`, Process Action on both the client and service have the same activity ID.</span></span>  
  
## <a name="synchronous-requestreply-with-errors"></a><span data-ttu-id="dac6a-139">Demande/Réponse synchrone avec erreurs</span><span class="sxs-lookup"><span data-stu-id="dac6a-139">Synchronous Request/Reply with Errors</span></span>  
 <span data-ttu-id="dac6a-140">La seule différence avec le scénario précédent est qu'un message d'erreur SOAP est retourné en tant que message de réponse.</span><span class="sxs-lookup"><span data-stu-id="dac6a-140">The only difference with the previous scenario is that a SOAP fault message is returned as a response message.</span></span> <span data-ttu-id="dac6a-141">Si `propagateActivity` = `true`, l’ID d’activité du message de demande est ajouté au message d’erreur SOAP.</span><span class="sxs-lookup"><span data-stu-id="dac6a-141">If `propagateActivity`=`true`, the activity ID of the request message is added to the SOAP fault message.</span></span>  
  
## <a name="synchronous-one-way-without-errors"></a><span data-ttu-id="dac6a-142">Unidirectionnel synchrone sans erreurs</span><span class="sxs-lookup"><span data-stu-id="dac6a-142">Synchronous One-Way without Errors</span></span>  
 <span data-ttu-id="dac6a-143">La seule différence avec le premier scénario est qu'aucun message n'est retourné au serveur.</span><span class="sxs-lookup"><span data-stu-id="dac6a-143">The only difference with the first scenario is that no message is returned to the server.</span></span> <span data-ttu-id="dac6a-144">Pour les protocoles basés sur HTTP, un état (valide ou erreur) est encore retourné au client.</span><span class="sxs-lookup"><span data-stu-id="dac6a-144">For HTTP-based protocols, a status (valid or error) is still returned to the client.</span></span> <span data-ttu-id="dac6a-145">Il s’agit, car le protocole HTTP est le seul protocole avec une sémantique de requête-réponse qui fait partie de la pile de protocole WCF.</span><span class="sxs-lookup"><span data-stu-id="dac6a-145">This is because HTTP is the only protocol with a request-response semantics that is part of the WCF protocol stack.</span></span> <span data-ttu-id="dac6a-146">Étant donné que le traitement TCP est masqué à partir de WCF, aucun accusé de réception n’est envoyé au client.</span><span class="sxs-lookup"><span data-stu-id="dac6a-146">Because TCP processing is hidden from WCF, no acknowledgement is sent to the client.</span></span>  
  
## <a name="synchronous-one-way-with-errors"></a><span data-ttu-id="dac6a-147">Unidirectionnel synchrone avec erreurs</span><span class="sxs-lookup"><span data-stu-id="dac6a-147">Synchronous One-Way with Errors</span></span>  
 <span data-ttu-id="dac6a-148">Si une erreur se produit lors du traitement du message (Q ou au-delà), aucune notification n'est retournée au client.</span><span class="sxs-lookup"><span data-stu-id="dac6a-148">If an error occurs while processing the message (Q or beyond), no notification is returned to the client.</span></span> <span data-ttu-id="dac6a-149">Cela est identique au scénario « Unidirectionnel synchrone sans erreurs ».</span><span class="sxs-lookup"><span data-stu-id="dac6a-149">This is identical to the "Synchronous One-Way without Errors" scenario.</span></span> <span data-ttu-id="dac6a-150">Vous ne devez pas utiliser de scénario unidirectionnel si vous souhaitez recevoir un message d'erreur.</span><span class="sxs-lookup"><span data-stu-id="dac6a-150">You should not use a One-Way scenario if you want to receive an error message.</span></span>  
  
## <a name="duplex"></a><span data-ttu-id="dac6a-151">Duplex</span><span class="sxs-lookup"><span data-stu-id="dac6a-151">Duplex</span></span>  
 <span data-ttu-id="dac6a-152">La différence avec les scénarios précédents est que le client joue le rôle de service ; il crée les activités ReceiveBytes et ProcessMessage, comme pour les scénarios asynchrones.</span><span class="sxs-lookup"><span data-stu-id="dac6a-152">The difference with the previous scenarios is that the client acts as a service, in which it creates the ReceiveBytes and ProcessMessage activities, similar to the Asynchronous scenarios.</span></span>
