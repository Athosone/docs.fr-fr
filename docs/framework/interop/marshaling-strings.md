---
title: Marshaling de chaînes
ms.date: 03/30/2017
helpviewer_keywords:
- marshaling, samples
- platform invoke, marshaling data
- data marshaling, strings
- data marshaling, samples
- data marshaling, platform invoke
- marshaling. strings
- marshaling, platform invoke
- sample applications [.NET Framework], marshaling strings
ms.assetid: e21b078b-70fb-4905-be26-c097ab2433ff
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: 0db33d59d1fc1c19e07567108970db77059cebb7
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/18/2019
ms.locfileid: "59223028"
---
# <a name="marshaling-strings"></a><span data-ttu-id="0d737-102">Marshaling de chaînes</span><span class="sxs-lookup"><span data-stu-id="0d737-102">Marshaling Strings</span></span>
<span data-ttu-id="0d737-103">L’appel de code non managé copie les paramètres de chaîne, en les convertissant si nécessaire du format .NET Framework (Unicode) au format non managé (ANSI).</span><span class="sxs-lookup"><span data-stu-id="0d737-103">Platform invoke copies string parameters, converting them from the .NET Framework format (Unicode) to the unmanaged format (ANSI), if needed.</span></span> <span data-ttu-id="0d737-104">Étant donné que les chaînes managées sont immuables, l’appel de code non managé ne les recopie pas de la mémoire non managée vers la mémoire managée au retour de la fonction.</span><span class="sxs-lookup"><span data-stu-id="0d737-104">Because managed strings are immutable, platform invoke does not copy them back from unmanaged memory to managed memory when the function returns.</span></span>  
  
 <span data-ttu-id="0d737-105">Le tableau suivant répertorie les options de marshaling pour les chaînes. Il décrit leur utilisation et fournit un lien vers l’exemple .NET Framework correspondant.</span><span class="sxs-lookup"><span data-stu-id="0d737-105">The following table lists marshaling options for strings, describes their usage, and provides a link to the corresponding .NET Framework sample.</span></span>  
  
|<span data-ttu-id="0d737-106">Chaîne</span><span class="sxs-lookup"><span data-stu-id="0d737-106">String</span></span>|<span data-ttu-id="0d737-107">Description</span><span class="sxs-lookup"><span data-stu-id="0d737-107">Description</span></span>|<span data-ttu-id="0d737-108">Exemple</span><span class="sxs-lookup"><span data-stu-id="0d737-108">Sample</span></span>|  
|------------|-----------------|------------|  
|<span data-ttu-id="0d737-109">Par valeur.</span><span class="sxs-lookup"><span data-stu-id="0d737-109">By value.</span></span>|<span data-ttu-id="0d737-110">Passe les structures en tant que paramètres entrants.</span><span class="sxs-lookup"><span data-stu-id="0d737-110">Passes strings as In parameters.</span></span>|[<span data-ttu-id="0d737-111">MsgBox</span><span class="sxs-lookup"><span data-stu-id="0d737-111">MsgBox</span></span>](msgbox-sample.md)|  
|<span data-ttu-id="0d737-112">Comme résultat.</span><span class="sxs-lookup"><span data-stu-id="0d737-112">As result.</span></span>|<span data-ttu-id="0d737-113">Retourne les chaînes à partir du code non managé.</span><span class="sxs-lookup"><span data-stu-id="0d737-113">Returns strings from unmanaged code.</span></span>|<span data-ttu-id="0d737-114">[Chaînes](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/e765dyyy(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="0d737-114">[Strings](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/e765dyyy(v=vs.100))</span></span>|  
|<span data-ttu-id="0d737-115">Par référence.</span><span class="sxs-lookup"><span data-stu-id="0d737-115">By reference.</span></span>|<span data-ttu-id="0d737-116">Passe des chaînes en tant que paramètres entrants/sortants avec <xref:System.Text.StringBuilder>.</span><span class="sxs-lookup"><span data-stu-id="0d737-116">Passes strings as In/Out parameters using <xref:System.Text.StringBuilder>.</span></span>|<span data-ttu-id="0d737-117">[Mémoires tampons](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/x3txb6xc(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="0d737-117">[Buffers](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/x3txb6xc(v=vs.100))</span></span>|  
|<span data-ttu-id="0d737-118">Dans une structure par valeur.</span><span class="sxs-lookup"><span data-stu-id="0d737-118">In a structure by value.</span></span>|<span data-ttu-id="0d737-119">Passe des chaînes dans une structure qui est un paramètre entrant.</span><span class="sxs-lookup"><span data-stu-id="0d737-119">Passes strings in a structure that is an In parameter.</span></span>|<span data-ttu-id="0d737-120">[Structs](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/eadtsekz(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="0d737-120">[Structs](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/eadtsekz(v=vs.100))</span></span>|  
|<span data-ttu-id="0d737-121">Dans une structure par référence **(char\*)**.</span><span class="sxs-lookup"><span data-stu-id="0d737-121">In a structure by reference **(char\*)**.</span></span>|<span data-ttu-id="0d737-122">Passe des chaînes dans une structure qui est un paramètre entrant/sortant.</span><span class="sxs-lookup"><span data-stu-id="0d737-122">Passes strings in a structure that is an In/Out parameter.</span></span> <span data-ttu-id="0d737-123">La fonction non managée attend un pointeur vers une mémoire tampon de caractères ; la taille de la mémoire tampon est un membre de la structure.</span><span class="sxs-lookup"><span data-stu-id="0d737-123">The unmanaged function expects a pointer to a character buffer and the buffer size is a member of the structure.</span></span>|<span data-ttu-id="0d737-124">[Chaînes](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/e765dyyy(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="0d737-124">[Strings](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/e765dyyy(v=vs.100))</span></span>|  
|<span data-ttu-id="0d737-125">Dans une structure par référence **(char[])**.</span><span class="sxs-lookup"><span data-stu-id="0d737-125">In a structure by reference **(char[])**.</span></span>|<span data-ttu-id="0d737-126">Passe des chaînes dans une structure qui est un paramètre entrant/sortant.</span><span class="sxs-lookup"><span data-stu-id="0d737-126">Passes strings in a structure that is an In/Out parameter.</span></span> <span data-ttu-id="0d737-127">La fonction non managée attend une mémoire tampon de caractères incorporée.</span><span class="sxs-lookup"><span data-stu-id="0d737-127">The unmanaged function expects an embedded character buffer.</span></span>|<span data-ttu-id="0d737-128">[OSInfo](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/795sy883(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="0d737-128">[OSInfo](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/795sy883(v=vs.100))</span></span>|  
|<span data-ttu-id="0d737-129">Dans une classe par valeur **(char\*)**.</span><span class="sxs-lookup"><span data-stu-id="0d737-129">In a class by value **(char\*)**.</span></span>|<span data-ttu-id="0d737-130">Passe des chaînes dans une classe (une classe est un paramètre entrant/sortant).</span><span class="sxs-lookup"><span data-stu-id="0d737-130">Passes strings in a class (a class is an In/Out parameter).</span></span> <span data-ttu-id="0d737-131">La fonction non managée attend un pointeur vers une mémoire tampon de caractères.</span><span class="sxs-lookup"><span data-stu-id="0d737-131">The unmanaged function expects a pointer to a character buffer.</span></span>|<span data-ttu-id="0d737-132">[OpenFileDlg](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/w5tyztk9(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="0d737-132">[OpenFileDlg](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/w5tyztk9(v=vs.100))</span></span>|  
|<span data-ttu-id="0d737-133">Dans une classe par valeur **(char[])**.</span><span class="sxs-lookup"><span data-stu-id="0d737-133">In a class by value **(char[])**.</span></span>|<span data-ttu-id="0d737-134">Passe des chaînes dans une classe (une classe est un paramètre entrant/sortant).</span><span class="sxs-lookup"><span data-stu-id="0d737-134">Passes strings in a class (a class is an In/Out parameter).</span></span> <span data-ttu-id="0d737-135">La fonction non managée attend une mémoire tampon de caractères incorporée.</span><span class="sxs-lookup"><span data-stu-id="0d737-135">The unmanaged function expects an embedded character buffer.</span></span>|<span data-ttu-id="0d737-136">[OSInfo](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/795sy883(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="0d737-136">[OSInfo](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/795sy883(v=vs.100))</span></span>|  
|<span data-ttu-id="0d737-137">Comme tableau de chaînes par valeur.</span><span class="sxs-lookup"><span data-stu-id="0d737-137">As an array of strings by value.</span></span>|<span data-ttu-id="0d737-138">Crée un tableau de chaînes qui est passé par valeur.</span><span class="sxs-lookup"><span data-stu-id="0d737-138">Creates an array of strings that is passed by value.</span></span>|[<span data-ttu-id="0d737-139">Tableaux</span><span class="sxs-lookup"><span data-stu-id="0d737-139">Arrays</span></span>](marshaling-different-types-of-arrays.md)|  
|<span data-ttu-id="0d737-140">Comme un tableau de structures qui contiennent des chaînes par valeur.</span><span class="sxs-lookup"><span data-stu-id="0d737-140">As an array of structures that contain strings by value.</span></span>|<span data-ttu-id="0d737-141">Crée un tableau de structures qui contiennent des chaînes ; le tableau est passé par valeur.</span><span class="sxs-lookup"><span data-stu-id="0d737-141">Creates an array of structures that contain strings and the array is passed by value.</span></span>|[<span data-ttu-id="0d737-142">Tableaux</span><span class="sxs-lookup"><span data-stu-id="0d737-142">Arrays</span></span>](marshaling-different-types-of-arrays.md)|  
  
## <a name="see-also"></a><span data-ttu-id="0d737-143">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="0d737-143">See also</span></span>

- [<span data-ttu-id="0d737-144">Marshaling de données à l’aide de l’appel de code managé</span><span class="sxs-lookup"><span data-stu-id="0d737-144">Marshaling Data with Platform Invoke</span></span>](marshaling-data-with-platform-invoke.md)
- [<span data-ttu-id="0d737-145">Marshaling de classes, de structures, et d’unions</span><span class="sxs-lookup"><span data-stu-id="0d737-145">Marshaling Classes, Structures, and Unions</span></span>](marshaling-classes-structures-and-unions.md)
- [<span data-ttu-id="0d737-146">Marshaling de différents types de tableaux</span><span class="sxs-lookup"><span data-stu-id="0d737-146">Marshaling Different Types of Arrays</span></span>](marshaling-different-types-of-arrays.md)
- <span data-ttu-id="0d737-147">[Exemples divers de marshaling](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ss9sb93t(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="0d737-147">[Miscellaneous Marshaling Samples](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ss9sb93t(v=vs.100))</span></span>
